# 릴리즈 v2.0.8 - 일괄소등 버튼 수정

## 🐛 버그 수정

### 일괄소등 버튼이 생성되지 않는 문제 해결

**문제점:**
- 일괄소등 스위치는 command `0x65` 또는 `0x66`을 받을 때만 생성되었습니다
- 초기 상태 업데이트는 command `0x00`을 사용하는데, 이것이 처리되지 않았습니다
- 결과적으로 일괄소등 엔티티가 전혀 등록되지 않았습니다

**수정 내용:**

1. **상태 업데이트 처리 추가**
   - `_handle_cutoff_switch`에서 command `0x00` (상태 업데이트) 지원 추가
   - `payload[0] == 0xFF`일 때 ON 상태로 판단
   - 기존의 직접 명령 지원 유지 (`0x65` = ON, `0x66` = OFF)
   - 항상 등록되도록 `_is_register = True` 설정

2. **명령 생성 개선**
   - `room_index == 0`으로 일괄소등 스위치 감지
   - 일괄소등 패킷의 `dest_room`을 `0xFF`로 설정
   - `data[0]`을 `0xFF` (켜기) 또는 `0x00` (끄기)로 설정

**효과:**
- ✅ 일괄소등 스위치 엔티티가 정상적으로 생성됩니다
- ✅ 상태 업데이트와 직접 명령 모두 처리됩니다
- ✅ Home Assistant에서 모든 조명을 제어할 수 있습니다

## 📝 변경된 파일
- `custom_components/kocom_wallpad/controller.py`
- `custom_components/kocom_wallpad/manifest.json`

## 🔄 업그레이드 안내

이 릴리즈는 일괄소등 기능을 사용하는 모든 사용자에게 **필수 업그레이드**입니다.

### 업그레이드 방법
1. 새 버전으로 업데이트
2. Home Assistant 재시작
3. 일괄소등 엔티티가 자동으로 생성됨

### 호환성
- v2.0.7과 완전히 호환
- 설정 변경 불필요
- 모든 기존 기능 유지

## 📊 통계
- **1개 버그 수정**
- **2개 파일 변경**
- **27개 추가, 11개 삭제**

## 🔗 링크
- **이전 버전**: v2.0.7 (성능 최적화)
- **전체 변경사항**: v2.0.7...v2.0.8

---

**참고**: 일괄소등 버튼이 표시되지 않았던 사용자는 이제 정상적으로 사용할 수 있습니다.
